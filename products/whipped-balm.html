<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whipped Tallow Balm - The Butcher's Tallow</title>
    <link rel="stylesheet" href="../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:wght@300;400;600;700&family=Source+Sans+Pro:wght@300;400;500;600;700&family=Crimson+Text:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="product-page">
    <!-- Header -->
    <header class="header">
        <div class="header-top">
            <div class="container">
                <div class="promo-banner">
                    <div class="promo-item">
                        <i class="fas fa-leaf"></i>
                        <span><strong>ALL NATURAL & HANDMADE</strong><br>Carefully crafted in Texas, ships all over the U.S.</span>
                    </div>
                    <div class="promo-item">
                        <i class="fas fa-shipping-fast"></i>
                        <span><strong>FREE SHIPPING</strong><br>On orders over $75.</span>
                    </div>
                    <div class="promo-item">
                        <i class="fas fa-star"></i>
                        <span><strong>PREMIUM QUALITY</strong><br>Grass-fed & finished traditionally rendered.</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="container">
            <nav class="navbar">
                <a href="../index.html" class="logo">
                    <img src="../assets/Logo Oval - no background - new.png?v=20250101" alt="The Butcher's Tallow" class="logo-img">
                    <span class="logo-text">The Butcher's Tallow</span>
                </a>
                
                <div class="nav-menu" id="nav-menu">
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="../index.html" class="nav-link">Home</a>
                        </li>
                        <li class="nav-item">
                            <a href="../index.html#products" class="nav-link">Shop All</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a href="#tallow-balm" class="nav-link">Tallow Balm <i class="fas fa-chevron-down"></i></a>
                            <ul class="dropdown-menu">
                                <li><a href="lip-balm.html">Lip Balm</a></li>
                                <li><a href="whipped-balm.html">Whipped Balm</a></li>
                                <li><a href="beard-balm.html">Beard Balm</a></li>
                                <li><a href="leather-conditioner.html">Leather Conditioner</a></li>
                            </ul>
                        </li>
                        <li class="nav-item dropdown">
                            <a href="#all-purpose-tallow" class="nav-link">All Purpose Tallow <i class="fas fa-chevron-down"></i></a>
                            <ul class="dropdown-menu">
                                <li><a href="all-purpose-tallow.html">All Purpose Tallow</a></li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a href="../index.html#about" class="nav-link">About</a>
                        </li>
                        <li class="nav-item">
                            <a href="../index.html#contact" class="nav-link">Contact</a>
                        </li>
                    </ul>
                </div>
                
                <div class="nav-actions">
                    <button class="search-btn" id="search-btn">
                        <i class="fas fa-search"></i>
                    </button>
                    <button class="cart-btn" id="cart-btn">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count" id="cart-count">0</span>
                    </button>
                    <button class="mobile-menu-btn" id="mobile-menu-btn">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                </div>
            </nav>
        </div>
    </header>

    <!-- Product Hero Section -->
    <section class="product-hero">
        <div class="container">
            <div class="product-hero-content">
                <div class="product-images">
                    <div class="main-image">
                        <button class="image-carousel-arrow left" id="image-arrow-left" aria-label="Previous image">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <img src="../assets/Whipped Balm Unscented  2.5 oz .jpeg" alt="Whipped Tallow Balm" id="main-product-image">
                        <button class="image-carousel-arrow right" id="image-arrow-right" aria-label="Next image">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        <div class="image-carousel-dots" id="image-carousel-dots"></div>
                    </div>
                </div>
                
                <div class="product-info">
                    <h1>Whipped Tallow Balm</h1>
                    <div class="product-rating">
                        <div class="stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <span class="rating-text">Premium Quality</span>
                    </div>
                    
                    <div class="product-price">
                        <span class="current-price" id="product-price">$25.00</span>
                        <span class="price-note">Starting at</span>
                    </div>
                    
                    <p class="product-description">
                        Light, fluffy whipped tallow balm made with grass-fed & finished beef suet tallow, organic jojoba oil, organic shea butter, organic arrowroot powder, and vitamin E oil. Available in 1.35 oz (small) and 2.5 oz (large) glass jars with unscented or pure essential oil blends.
                    </p>
                    
                    <div class="product-options">
                        <div class="size-selector">
                            <label for="size-select">Size:</label>
                            <select id="size-select" style="width: 100%; padding: 12px 16px; border: 2px solid #654321; border-radius: 8px; background: #F5E6D3; color: #2c1810; font-size: 1rem; cursor: pointer;">
                                <option value="1.35oz" data-price="25.00">1.35 oz Glass Jar - $25.00</option>
                                <option value="2.5oz" data-price="35.00">2.5 oz Glass Jar - $35.00</option>
                            </select>
                        </div>
                        
                        <div class="scent-selector">
                            <label for="scent-select">Scent:</label>
                            <select id="scent-select" style="width: 100%; padding: 12px 16px; border: 2px solid #654321; border-radius: 8px; background: #F5E6D3; color: #2c1810; font-size: 1rem; cursor: pointer;">
                                <option value="unscented" data-price="0.00">Unscented</option>
                                <option value="citrus" data-price="0.00">Citrus</option>
                                <option value="frankincense-lavender" data-price="0.00">Frankincense and Lavender</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="product-actions">
                        <div class="quantity-selector">
                            <label for="quantity">Quantity:</label>
                            <div class="quantity-controls">
                                <button type="button" class="quantity-btn" id="quantity-minus">-</button>
                                <input type="number" id="quantity" value="1" min="1" max="10">
                                <button type="button" class="quantity-btn" id="quantity-plus">+</button>
                            </div>
                        </div>
                        
                        <button class="btn btn-primary add-to-cart-btn" id="add-to-cart">
                            <i class="fas fa-shopping-cart"></i>
                            Add to Cart
                        </button>
                    </div>
                    
                    <div class="product-features">
                        <div class="feature">
                            <i class="fas fa-leaf"></i>
                            <span>100% Grass-Fed</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-shield-alt"></i>
                            <span>Traditionally Rendered</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-flag-usa"></i>
                            <span>Made in Texas, USA</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Product Details Section -->
    <section class="product-details">
        <div class="container">
            <div class="details-tabs">
                <button class="tab-btn active" data-tab="description">Description</button>
                <button class="tab-btn" data-tab="ingredients">Ingredients</button>
                <button class="tab-btn" data-tab="usage">Usage</button>
                <button class="tab-btn" data-tab="reviews">Reviews</button>
            </div>
            
            <div class="tab-content">
                <div class="tab-panel active" id="description">
                    <h3>About This Product</h3>
                    <p>Our Whipped Tallow Balm is a luxurious, light, and fluffy moisturizer perfect for all-over body care. This premium balm is whipped to perfection for fast absorption and deep hydration, making it ideal for daily skincare routines.</p>
                    
                    <h4>Why Choose Our Whipped Balm?</h4>
                    <ul>
                        <li>Light, fluffy texture for fast absorption</li>
                        <li>Rich in vitamins A, D, E, and K from grass-fed & finished suet tallow</li>
                        <li>Base of organic jojoba oil, organic shea butter, organic arrowroot powder, and vitamin E oil</li>
                        <li>Available unscented or with pure essential oil blends</li>
                        <li>Two handcrafted sizes: 1.35 oz (small) and 2.5 oz (large)</li>
                        <li>Two convenient glass jar sizes</li>
                        <li>Perfect for sensitive skin</li>
                        <li>Deeply hydrating formula</li>
                    </ul>
                </div>
                
                <div class="tab-panel" id="ingredients">
                    <h3>Ingredients</h3>
                    <p><strong>Base formula (all scents):</strong></p>
                    <ul>
                        <li>Grass-fed & finished beef suet tallow</li>
                        <li>Organic jojoba oil</li>
                        <li>Organic shea butter</li>
                        <li>Organic arrowroot powder</li>
                        <li>Vitamin E oil</li>
                    </ul>
                    <p><strong>Scent options:</strong></p>
                    <ul>
                        <li><strong>Unscented:</strong> Base formula only (no essential oils)</li>
                        <li><strong>Citrus:</strong> Base formula plus pure citrus essential oil blend</li>
                        <li><strong>Frankincense & Lavender:</strong> Base formula plus pure frankincense and lavender essential oils</li>
                    </ul>
                    <p>Each jar—small (1.35 oz) or large (2.5 oz)—is whipped in small batches for a consistent, silky texture.</p>
                </div>
                
                <div class="tab-panel" id="usage">
                    <h3>How to Use</h3>
                    <ul>
                        <li>Apply to clean, dry skin as needed</li>
                        <li>Use after showering for best absorption</li>
                        <li>Perfect for face, body, hands, and feet</li>
                        <li>Great for dry and sensitive skin</li>
                        <li>Can be used morning and evening</li>
                        <li>Small amount goes a long way</li>
                    </ul>
                </div>
                
                <div class="tab-panel" id="reviews">
                    <div class="reviews-header">
                        <h3>Customer Reviews</h3>
                        <button class="btn btn-primary write-review-btn" data-product-id="whipped-tallow-balm" data-product-name="Whipped Tallow Balm">
                            <i class="fas fa-pen"></i> Write a Review
                        </button>
                    </div>
                    <div id="reviews-container">
                        <!-- Reviews will be loaded here by JavaScript -->
                        <div class="no-reviews">
                            <i class="fas fa-comment-slash"></i>
                            <h4>No reviews yet</h4>
                            <p>Be the first to share your experience with this product!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Related Products -->
    <section class="related-products">
        <div class="container">
            <h2>You Might Also Like</h2>
            <div class="products-grid">
                <div class="product-card">
                    <div class="product-image">
                        <img src="../assets/Large Tallow Black Background.jpeg" alt="100% All Purpose Suet Beef Tallow">
                    </div>
                    <div class="product-info">
                        <h3>100% All Purpose Suet Beef Tallow</h3>
                        <div class="product-price">Starting at $10.00</div>
                        <a href="all-purpose-tallow.html" class="btn btn-secondary">View Product</a>
                    </div>
                </div>
                
                <div class="product-card">
                    <div class="product-image">
                        <img src="../assets/all lip balm flavors black background.jpg" alt="Tallow Lip Balm">
                    </div>
                    <div class="product-info">
                        <h3>Tallow Lip Balm</h3>
                        <div class="product-price">$8.00</div>
                        <a href="lip-balm.html" class="btn btn-secondary">View Product</a>
                    </div>
                </div>
                
                <div class="product-card">
                    <div class="product-image">
                        <img src="../assets/Beard Balm black background.jpeg" alt="Tallow Beard Balm">
                    </div>
                    <div class="product-info">
                        <h3>Tallow Beard Balm</h3>
                        <div class="product-price">$15.00</div>
                        <a href="beard-balm.html" class="btn btn-secondary">View Product</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>The Butcher's Tallow</h3>
                    <p>Premium grass-fed tallow products for skincare, candle making, and household crafts. Clean, natural, and rooted in tradition.</p>
                </div>
                
                <div class="footer-section">
                    <h4>Shop</h4>
                    <ul>
                        <li><a href="../index.html#products">All Products</a></li>
                        <li><a href="lip-balm.html">Lip Balm</a></li>
                        <li><a href="whipped-balm.html">Whipped Balm</a></li>
                        <li><a href="beard-balm.html">Beard Balm</a></li>
                        <li><a href="leather-conditioner.html">Leather Conditioner</a></li>
                        <li><a href="all-purpose-tallow.html">All Purpose Tallow</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="../index.html#contact">Contact Us</a></li>
                        <li><a href="#shipping">Shipping Info</a></li>
                        <li><a href="#returns">Returns</a></li>
                        <li><a href="#faq">FAQ</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>Connect</h4>
                    <div class="social-links">
                        <a href="https://www.facebook.com/TheButchersTallow/" class="social-link" target="_blank" rel="noopener noreferrer"><i class="fab fa-facebook"></i></a>
                        <a href="https://www.instagram.com/thebutcherstallow/" class="social-link" target="_blank" rel="noopener noreferrer"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 The Butcher's Tallow. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Shopping Cart Modal -->
    <div class="cart-modal" id="cart-modal">
        <div class="cart-content">
            <div class="cart-header">
                <h3>Shopping Cart</h3>
                <button class="close-cart" id="close-cart">&times;</button>
            </div>
            <div class="cart-items" id="cart-items">
                <!-- Cart items will be populated here -->
            </div>
            <div class="cart-footer">
                <div class="cart-total">
                    <strong>Total: $<span id="cart-total">0.00</span></strong>
                </div>
                <button class="btn btn-primary shopify-checkout-btn" id="shopify-checkout">
                    Proceed to Checkout
                </button>
                <button class="btn btn-secondary" id="continue-shopping">
                    Continue Shopping
                </button>
            </div>
        </div>
    </div>

    <!-- Include main scripts -->
    <script src="../shopify-config.js"></script>
    <script src="../script.js"></script>
    
    <!-- Search Modal -->
    <div class="search-modal" id="search-modal">
        <div class="search-modal-content">
            <div class="search-header">
                <input type="text" id="search-input" placeholder="Search for products..." autocomplete="off">
                <button class="close-search" id="close-search">&times;</button>
            </div>
            <div class="search-results" id="search-results">
                <p class="search-hint">Start typing to search for products...</p>
            </div>
        </div>
    </div>

    <!-- Review Submission Modal -->
    <div class="review-modal" id="review-modal">
        <div class="review-modal-content">
            <div class="review-modal-header">
                <h3>Write a Review</h3>
                <button class="close-review-modal" id="close-review-modal">&times;</button>
            </div>
            <form class="review-form" id="review-form">
                <input type="hidden" id="review-product-id" name="product-id">
                <input type="hidden" id="review-product-name" name="product-name">
                
                <div class="form-group">
                    <label for="review-name">Your Name *</label>
                    <input type="text" id="review-name" name="name" required>
                </div>
                
                <div class="form-group">
                    <label for="review-email">Email (won't be published) *</label>
                    <input type="email" id="review-email" name="email" required>
                </div>
                
                <div class="form-group">
                    <label>Rating *</label>
                    <div class="star-rating" id="star-rating">
                        <i class="far fa-star" data-rating="1"></i>
                        <i class="far fa-star" data-rating="2"></i>
                        <i class="far fa-star" data-rating="3"></i>
                        <i class="far fa-star" data-rating="4"></i>
                        <i class="far fa-star" data-rating="5"></i>
                    </div>
                    <input type="hidden" id="review-rating" name="rating" required>
                </div>
                
                <div class="form-group">
                    <label for="review-title">Review Title *</label>
                    <input type="text" id="review-title" name="title" required placeholder="Sum up your experience">
                </div>
                
                <div class="form-group">
                    <label for="review-text">Your Review *</label>
                    <textarea id="review-text" name="review" rows="5" required placeholder="Tell us about your experience with this product"></textarea>
                </div>
                
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="review-verified" name="verified">
                        I am a verified purchaser
                    </label>
                </div>
                
                <button type="submit" class="btn btn-primary">Submit Review</button>
                <p class="form-note">* Required fields. Reviews are moderated before being published.</p>
            </form>
        </div>
    </div>
    
    <script>
        // Product page functionality
        document.addEventListener('DOMContentLoaded', function() {
            const sizeSelect = document.getElementById('size-select');
            const scentSelect = document.getElementById('scent-select');
            const priceElement = document.getElementById('product-price');
            const quantityInput = document.getElementById('quantity');
            const quantityMinus = document.getElementById('quantity-minus');
            const quantityPlus = document.getElementById('quantity-plus');
            const addToCartBtn = document.getElementById('add-to-cart');
            
            // Whipped balm image mapping for all 6 combinations
            const whippedBalmImages = {
                '1.35oz-unscented': '../assets/whipped balm unscented 1.35 oz.jpeg',
                '1.35oz-citrus': '../assets/Whipped balm, cirtus 1.35 oz.jpeg',
                '1.35oz-frankincense-lavender': '../assets/Whipped Balm frankincense and lavender 1.35 oz.jpeg',
                '2.5oz-unscented': '../assets/Whipped Balm Unscented  2.5 oz .jpeg',
                '2.5oz-citrus': '../assets/Whipped Balm Citrus 2.5 oz .jpeg',
                '2.5oz-frankincense-lavender': '../assets/Whipped Balm Frankincense and lavender 2.5 oz.jpeg'
            };
            
            // Function to update whipped balm image based on size and scent
            function updateWhippedBalmImage() {
                const mainImage = document.getElementById('main-product-image');
                if (mainImage && sizeSelect && scentSelect) {
                    const size = sizeSelect.value;
                    const scent = scentSelect.value;
                    const variantKey = `${size}-${scent}`;
                    const imagePath = whippedBalmImages[variantKey];
                    
                    if (imagePath) {
                        mainImage.src = imagePath;
                        // Update alt text
                        const sizeText = size === '1.35oz' ? '1.35 oz' : '2.5 oz';
                        const scentText = scent === 'frankincense-lavender' ? 'Frankincense and Lavender' : 
                                         scent.charAt(0).toUpperCase() + scent.slice(1);
                        mainImage.alt = `Whipped Tallow Balm - ${sizeText} - ${scentText}`;
                    }
                }
            }
            
            // Update price and image when size changes
            if (sizeSelect) {
                sizeSelect.addEventListener('change', function() {
                    const selectedOption = this.options[this.selectedIndex];
                    const price = selectedOption.getAttribute('data-price');
                    if (priceElement) {
                        priceElement.textContent = `$${price}`;
                    }
                    updateWhippedBalmImage();
                });
            }
            
            // Update image when scent changes
            if (scentSelect) {
                scentSelect.addEventListener('change', function() {
                    updateWhippedBalmImage();
                });
            }
            
            // Set initial image based on default selections
            updateWhippedBalmImage();
            
            // Image carousel functionality
            const imageArrowLeft = document.getElementById('image-arrow-left');
            const imageArrowRight = document.getElementById('image-arrow-right');
            const whippedBalmSequence = [
                { size: '1.35oz', scent: 'unscented' },
                { size: '1.35oz', scent: 'citrus' },
                { size: '1.35oz', scent: 'frankincense-lavender' },
                { size: '2.5oz', scent: 'unscented' },
                { size: '2.5oz', scent: 'citrus' },
                { size: '2.5oz', scent: 'frankincense-lavender' }
            ];
            
            // Function to get current image index from current size and scent
            function getCurrentImageIndex() {
                const currentSize = sizeSelect ? sizeSelect.value : '1.35oz';
                const currentScent = scentSelect ? scentSelect.value : 'unscented';
                const index = whippedBalmSequence.findIndex(item => item.size === currentSize && item.scent === currentScent);
                return index >= 0 ? index : 0;
            }
            
            // Function to update dropdowns based on image index
            function updateDropdownsFromImage(index) {
                if (index >= 0 && index < whippedBalmSequence.length && sizeSelect && scentSelect) {
                    const item = whippedBalmSequence[index];
                    sizeSelect.value = item.size;
                    scentSelect.value = item.scent;
                    
                    // Update price
                    const selectedOption = sizeSelect.options[sizeSelect.selectedIndex];
                    const price = selectedOption.getAttribute('data-price');
                    if (priceElement) {
                        priceElement.textContent = `$${price}`;
                    }
                    
                    updateWhippedBalmImage();
                }
            }
            
            // Left arrow click handler
            if (imageArrowLeft) {
                imageArrowLeft.addEventListener('click', function() {
                    let currentIndex = getCurrentImageIndex();
                    currentIndex = (currentIndex - 1 + whippedBalmSequence.length) % whippedBalmSequence.length;
                    updateDropdownsFromImage(currentIndex);
                });
            }
            
            // Right arrow click handler
            if (imageArrowRight) {
                imageArrowRight.addEventListener('click', function() {
                    let currentIndex = getCurrentImageIndex();
                    currentIndex = (currentIndex + 1) % whippedBalmSequence.length;
                    updateDropdownsFromImage(currentIndex);
                });
            }
            
            // Quantity controls
            if (quantityMinus) {
                quantityMinus.addEventListener('click', function() {
                    const currentValue = parseInt(quantityInput.value);
                    if (currentValue > 1) {
                        quantityInput.value = currentValue - 1;
                    }
                });
            }
            
            if (quantityPlus) {
                quantityPlus.addEventListener('click', function() {
                    const currentValue = parseInt(quantityInput.value);
                    if (currentValue < 10) {
                        quantityInput.value = currentValue + 1;
                    }
                });
            }
            
            // Add to cart functionality is now handled centrally in script.js
            // No need for duplicate event listeners here
            
            // Tab functionality
            const tabBtns = document.querySelectorAll('.tab-btn');
            const tabPanels = document.querySelectorAll('.tab-panel');
            
            tabBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const targetTab = this.getAttribute('data-tab');
                    
                    // Remove active class from all tabs and panels
                    tabBtns.forEach(b => b.classList.remove('active'));
                    tabPanels.forEach(p => p.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding panel
                    this.classList.add('active');
                    document.getElementById(targetTab).classList.add('active');
                    
                    // Load reviews when reviews tab is clicked
                    if (targetTab === 'reviews' && window.reviewSystem) {
                        window.reviewSystem.displayReviews('whipped-tallow-balm', 'reviews-container');
                    }
                });
            });
            
            // Add search button to nav if it exists
            const navActions = document.querySelector('.nav-actions');
            if (navActions && !document.getElementById('search-btn')) {
                const searchBtn = document.createElement('button');
                searchBtn.className = 'search-btn';
                searchBtn.id = 'search-btn';
                searchBtn.innerHTML = '<i class="fas fa-search"></i>';
                navActions.insertBefore(searchBtn, navActions.firstChild);
            }
        });
    </script>
</body>
</html>
